{"ast":null,"code":"import _toConsumableArray from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/inherits\";import _slicedToArray from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Formation from'./Formation';import CurrentDraft from'./CurrentDraft';import PlayerDatabase from'./Components/Database.jsx';import PlayerTeam from'./Components/PlayerTeam.jsx';import Button from'@material-ui/core/Button';import firebase from'./Firebase/firebase';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';/** This is an arrow function to set up the Dialog/Confirmation popup to draft a player they clicked on\n * @author goethel\n * @param {\n * DialogState:boolean\n * handleClose:function (from parent component)\n * } params \n * CHANGES\n * 11/11 - Function Created, Code moved outside of class to avoid Hook errors with react - goethel\n */export var DialogBox=function DialogBox(params){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];if(params.props.DialogState==true&&open==false){setOpen(true);}var handleClose=function handleClose(){setOpen(false);params.props.handleClose();};var handleConfirmed=function handleConfirmed(){setOpen(false);params.props.handleConfirmDraft();};return React.createElement(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\"},React.createElement(DialogTitle,{id:\"alert-dialog-title\"},\"Draft This Player?\"),React.createElement(DialogContent,null,React.createElement(DialogContentText,{id:\"alert-dialog-description\"},params.props.player.NAME,\"\\n\",params.props.player.RATING)),React.createElement(DialogActions,null,React.createElement(Button,{onClick:handleClose,color:\"primary\"},\"Cancel\"),React.createElement(Button,{onClick:handleConfirmed,color:\"primary\",autoFocus:true},\"Draft\")));};var numPlayers=30;// This is to allow for testing/development, so that we do not run over our server quota by pulling the whole database every time. Will be increased to top 2000 during demos\nvar data=require('./Player.json');/** This is the parent Component of all the components in the Draft Page, so that state can be shared easily\n * \n * @author shivi \n * \n * CHANGELOG\n * 11/01 Updated with documentation and a button linking to results page for testing - goethel\n * 10/30 Component Created - shivi\n */var DraftPageMaster=/*#__PURE__*/function(_React$Component){_inherits(DraftPageMaster,_React$Component);function DraftPageMaster(props){var _this;_classCallCheck(this,DraftPageMaster);// This is where you should grab the settings from index browser storage to use throughout draft\n_this=_possibleConstructorReturn(this,_getPrototypeOf(DraftPageMaster).call(this,props));_this.state={rows:[],t1:[],t2:[],t3:[],t4:[],t5:[],t6:[],NumPlayersTeam:localStorage.getItem(\"index_numplayers\"),// Number of players per team\nnumTeams:localStorage.getItem(\"index_numteams\"),// Number of teams\nDialogState:false,curPlayerSelected:\"\",// The player that the user double clicked on\ndraftedPlayer:\"\",// This variable will update with the last drafted player\ncurTeam:1,// Allows Players to select which team drafts first\ncurTeamName:localStorage.getItem(\"index_team\"+1),// Team name of current team\ndraftType:localStorage.getItem(\"index_roundtrans\"),// Snake or Normal draft\nsnakeDraftSide:1,// Snake going forward round (1234) or backwards round (4321)\npickNum:1,// CUrrent Pick #\ndev:false,topBarList:[]// List of players on the top bar\n};// Any function used in callback must be bound here or React will not work with them\n_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));_this.handleClose=_this.handleClose.bind(_assertThisInitialized(_this));_this.handleConfirmDraft=_this.handleConfirmDraft.bind(_assertThisInitialized(_this));return _this;}/** This function grabs the X number of players from firebase, and by default sorts by overall or rating\n     * \n     * @author goethel \n     * \n     * CHANGELOG\n     * 11/5 - added option for local DB usage - goethel\n     * 11/2 - file created - goethel\n     */_createClass(DraftPageMaster,[{key:\"componentDidMount\",value:function componentDidMount(){// var myData = Object.keys(data).map(key => {\n//     if(!(data[key].CLUB == \"Icons\")) {\n//         return data[key];\n//     }\n//     else {\n//         delete data[key];\n//     }\n// })\nvar that=this;if(this.state.dev==true){var mostViewedPosts=firebase.database().ref('Players').orderByChild('RATING').limitToLast(numPlayers).once(\"value\").then(function(snapshot){snapshot.forEach(function(childSnapshot){var childData=childSnapshot.val();// This is where checks for Drafted players will occur\nthat.setState({rows:[].concat(_toConsumableArray(that.state.rows),[childData])});});});}if(localStorage.getItem(\"index_numplayers\")!=null){this.setState({rows:data,NumPlayersTeam:localStorage.getItem(\"index_numplayers\"),numTeams:localStorage.getItem(\"index_numteams\")});}else{this.setState({rows:data,numTeams:3,NumPlayersTeam:2});}}/** This handles the initial opening of the DialogBox after the user double clicks on a player in the Data Grid\n     * \n     */},{key:\"handleClick\",value:function handleClick(event){this.gridApi=event.api;this.rowNode=event.node;this.setState({DialogState:true,curPlayerSelected:event.data});}/** This function closes the dialog box, if the user clicks cancel\n     * \n     * \n     * 11/11 - Function Created\n     */},{key:\"handleClose\",value:function handleClose(){this.setState({DialogState:false});}/** This function adds the most recent drafted player onm the top bar.\n     * \n     * @author Shivi\n     * \n     * 11/14 - Function Created\n     */},{key:\"createDraftedList\",value:function createDraftedList(player){var cardInfo={};cardInfo.playerNum=0;cardInfo.playerDrafted=player;var list=this.state.topBarList;if(list.length===this.state.numTeams){list.shift();list.push(player);}else{list.push(player);}}/** This function adds the drafted player to the correct team\n     * @author goethel\n     * \n     * 11/13 - Function Created\n     */},{key:\"addPlayerToTeam\",value:function addPlayerToTeam(){var team=this.state.curTeam;if(team==1){this.setState({t1:this.state.t1.concat(this.state.curPlayerSelected)});}else if(team==2){this.setState({t2:this.state.t2.concat(this.state.curPlayerSelected)});}else if(team==3){this.setState({t3:this.state.t3.concat(this.state.curPlayerSelected)});}else if(team==4){this.setState({t4:this.state.t4.concat(this.state.curPlayerSelected)});}else if(team==5){this.setState({t5:this.state.t5.concat(this.state.curPlayerSelected)});}else if(team==6){this.setState({t6:this.state.t6.concat(this.state.curPlayerSelected)});}}/** This function removes a drafted player from the data grid\n     * \n     */},{key:\"onRemoveSelected\",value:function onRemoveSelected(){var res=this.gridApi.updateRowData({remove:[this.rowNode.data]});console.log(res);}/** This is the function where the switchover code for changing who is drafting should occur\n     * \n     */},{key:\"handleConfirmDraft\",value:function handleConfirmDraft(){this.setState({DialogState:false,pickNum:this.state.pickNum+1,draftedPlayer:this.state.curPlayerSelected});this.addPlayerToTeam();debugger;if(this.isDraftDone()==true){this.DraftFinished();}else{if(this.state.draftType==\"repeating\"){if(this.state.curTeam==this.state.numTeams){this.setState({curTeam:1});this.setState({curTeamName:localStorage.getItem(\"index_team\"+this.state.curTeam)});}else{this.setState({curTeam:this.state.curTeam+1});this.setState({curTeamName:localStorage.getItem(\"index_team\"+this.state.curTeam)});}}// Code for evaluating next pick in snake draft\nelse if(this.state.draftType==\"snake\"){console.log(this.state.curTeam+\", forward/back:\"+this.state.snakeDraftSide);// debug\nif(this.state.snakeDraftSide==1){if(this.state.curTeam==this.state.numTeams){this.setState({snakeDraftSide:0});}else{this.setState({curTeam:this.state.curTeam+1});this.setState({curTeamName:localStorage.getItem(\"index_team\"+this.state.curTeam)});}}else{if(this.state.curTeam==1){this.setState({snakeDraftSide:1});}else{this.setState({curTeam:this.state.curTeam-1});this.setState({curTeamName:localStorage.getItem(\"index_team\"+this.state.curTeam)});}}}// Code for switching to next pick\n}if(this.state.curPlayerSelected!=\"\"){this.onRemoveSelected();}}/** This function will check if Draft is Done or not, treat as js function\n     * \n     */},{key:\"isDraftDone\",value:function isDraftDone(){if(this.state.pickNum>=this.state.numTeams*this.state.NumPlayersTeam){return true;}else{return false;}}/** This Function handles the eventual switchover to Results Page, and stores the Team data into the local browser storage to be used by the Results Page\n     * \n     */},{key:\"DraftFinished\",value:function DraftFinished(){// Place finished teams here.\nlocalStorage.setItem(\"draft_t1\",JSON.stringify(this.state.t1));localStorage.setItem(\"draft_t2\",JSON.stringify(this.state.t2));localStorage.setItem(\"draft_t3\",JSON.stringify(this.state.t3));localStorage.setItem(\"draft_t4\",JSON.stringify(this.state.t4));localStorage.setItem(\"draft_t5\",JSON.stringify(this.state.t5));localStorage.setItem(\"draft_t6\",JSON.stringify(this.state.t6));window.location.href=\"../../tradingpage.html\";}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"App\"},React.createElement(\"header\",{className:\"App-header\"},React.createElement(\"h1\",null,this.state.curTeamName,\" currently drafting\"),React.createElement(\"h2\",null,\"Pick Number \",this.state.pickNum)),React.createElement(\"div\",{className:\"draft-Body\"},React.createElement(DialogBox,{props:{DialogState:this.state.DialogState,handleClose:this.handleClose,handleConfirmDraft:this.handleConfirmDraft,player:this.state.curPlayerSelected}}),React.createElement(CurrentDraft,{playerList:this.state.topBarList}),React.createElement(PlayerDatabase,{props:{rows:this.state.rows,handleClick:this.handleClick}}),React.createElement(\"div\",null,React.createElement(Formation,null),React.createElement(PlayerTeam,{curTeam:this.state.curTeam,t1:this.state.t1,t2:this.state.t2,t3:this.state.t3,t4:this.state.t4,t5:this.state.t5,t6:this.state.t6}))),React.createElement(\"div\",null,React.createElement(Button,{href:\"../../tradingpage.html\",color:\"primary\",variant:\"contained\",className:\"results\"},\"Results Page (TESTING ONLY)\")),React.createElement(\"a\",{className:\"App-link\",href:\"https://reactjs.org\",target:\"_blank\",rel:\"noopener noreferrer\"},\"Built with React.js\"));}},{key:\"currentDraft\",value:function currentDraft(){}}]);return DraftPageMaster;}(React.Component);export default DraftPageMaster;","map":{"version":3,"sources":["/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/src/DraftPageMaster.js"],"names":["React","Formation","CurrentDraft","PlayerDatabase","PlayerTeam","Button","firebase","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","DialogBox","params","useState","open","setOpen","props","DialogState","handleClose","handleConfirmed","handleConfirmDraft","player","NAME","RATING","numPlayers","data","require","DraftPageMaster","state","rows","t1","t2","t3","t4","t5","t6","NumPlayersTeam","localStorage","getItem","numTeams","curPlayerSelected","draftedPlayer","curTeam","curTeamName","draftType","snakeDraftSide","pickNum","dev","topBarList","handleClick","bind","that","mostViewedPosts","database","ref","orderByChild","limitToLast","once","then","snapshot","forEach","childSnapshot","childData","val","setState","event","gridApi","api","rowNode","node","cardInfo","playerNum","playerDrafted","list","length","shift","push","team","concat","res","updateRowData","remove","console","log","addPlayerToTeam","isDraftDone","DraftFinished","onRemoveSelected","setItem","JSON","stringify","window","location","href","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport Formation from './Formation';\nimport CurrentDraft from './CurrentDraft';\nimport PlayerDatabase from './Components/Database.jsx';\nimport PlayerTeam from './Components/PlayerTeam.jsx';\nimport Button from '@material-ui/core/Button';\nimport firebase from './Firebase/firebase'\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\n/** This is an arrow function to set up the Dialog/Confirmation popup to draft a player they clicked on\n * @author goethel\n * @param {\n * DialogState:boolean\n * handleClose:function (from parent component)\n * } params \n * CHANGES\n * 11/11 - Function Created, Code moved outside of class to avoid Hook errors with react - goethel\n */\nexport const DialogBox = (params) => {\n    const [open, setOpen] = React.useState(false);\n    \nif(params.props.DialogState == true && open == false) {\n    setOpen(true);\n}\nconst  handleClose = () => {\n    setOpen(false);\n    params.props.handleClose();\n}\nconst  handleConfirmed = () => {\n    setOpen(false);\n    params.props.handleConfirmDraft();\n}\n    return(<Dialog\n    open={open}\n    onClose={handleClose}\n    aria-labelledby=\"alert-dialog-title\"\n    aria-describedby=\"alert-dialog-description\"\n    >\n    <DialogTitle id=\"alert-dialog-title\">{\"Draft This Player?\"}</DialogTitle>\n    <DialogContent>\n      <DialogContentText id=\"alert-dialog-description\">\n        {params.props.player.NAME}{\"\\n\"}\n        {params.props.player.RATING}\n      </DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={handleClose} color=\"primary\">\n        Cancel\n      </Button>\n      <Button onClick={handleConfirmed} color=\"primary\" autoFocus>\n        Draft\n      </Button>\n    </DialogActions>\n    </Dialog>);\n}\n\nconst numPlayers = 30; // This is to allow for testing/development, so that we do not run over our server quota by pulling the whole database every time. Will be increased to top 2000 during demos\nconst data=require('./Player.json');\n/** This is the parent Component of all the components in the Draft Page, so that state can be shared easily\n * \n * @author shivi \n * \n * CHANGELOG\n * 11/01 Updated with documentation and a button linking to results page for testing - goethel\n * 10/30 Component Created - shivi\n */\nclass DraftPageMaster extends React.Component {\n    \n    constructor(props) {\n        // This is where you should grab the settings from index browser storage to use throughout draft\n        super(props);\n        this.state = {\n\t\trows:[],\n                t1:[],\n                t2:[],\n                t3:[],\n                t4:[],\n                t5:[],\n                t6:[],\n                \n        NumPlayersTeam: localStorage.getItem(\"index_numplayers\"), // Number of players per team\n        numTeams: localStorage.getItem(\"index_numteams\"), // Number of teams\n        DialogState:false,\n        curPlayerSelected:\"\", // The player that the user double clicked on\n        draftedPlayer:\"\", // This variable will update with the last drafted player\n        curTeam:1, // Allows Players to select which team drafts first\n        curTeamName: localStorage.getItem(\"index_team\" + 1), // Team name of current team\n        draftType: localStorage.getItem(\"index_roundtrans\"), // Snake or Normal draft\n        snakeDraftSide:1, // Snake going forward round (1234) or backwards round (4321)\n        pickNum:1, // CUrrent Pick #\n        dev:false,\n        topBarList: [] // List of players on the top bar\n        }\n    \n    // Any function used in callback must be bound here or React will not work with them\n    this.handleClick = this.handleClick.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleConfirmDraft = this.handleConfirmDraft.bind(this);\n    }\n    /** This function grabs the X number of players from firebase, and by default sorts by overall or rating\n     * \n     * @author goethel \n     * \n     * CHANGELOG\n     * 11/5 - added option for local DB usage - goethel\n     * 11/2 - file created - goethel\n     */\n    componentDidMount() {\n\n        // var myData = Object.keys(data).map(key => {\n        //     if(!(data[key].CLUB == \"Icons\")) {\n        //         return data[key];\n        //     }\n        //     else {\n        //         delete data[key];\n        //     }\n        // })\n        var that = this;\n        if(this.state.dev == true) {\n        var mostViewedPosts = firebase.database().ref('Players').orderByChild('RATING').limitToLast(numPlayers).once(\"value\").then(function(snapshot){\n            snapshot.forEach(function (childSnapshot) {\n                var childData = childSnapshot.val();\n                // This is where checks for Drafted players will occur\n                that.setState({rows:[...that.state.rows,childData]});\n            });\n        });   \n        } \n        if(localStorage.getItem(\"index_numplayers\") != null) {\n            this.setState({rows:data,NumPlayersTeam:localStorage.getItem(\"index_numplayers\"),numTeams:localStorage.getItem(\"index_numteams\")});\n        }\n       else {\n           this.setState({rows:data,numTeams:3,NumPlayersTeam:2});\n       }\n     \n    }\n    /** This handles the initial opening of the DialogBox after the user double clicks on a player in the Data Grid\n     * \n     */\n    handleClick(event) {\n\n       this.gridApi = event.api;\n        this.rowNode = event.node;\n        this.setState({DialogState:true,curPlayerSelected:event.data})\n    }\n    /** This function closes the dialog box, if the user clicks cancel\n     * \n     * \n     * 11/11 - Function Created\n     */\n    handleClose() {\n        this.setState({DialogState:false})\n    }\n\n    /** This function adds the most recent drafted player onm the top bar.\n     * \n     * @author Shivi\n     * \n     * 11/14 - Function Created\n     */\n    createDraftedList(player){\n        var cardInfo = {};\n        cardInfo.playerNum = 0;\n        cardInfo.playerDrafted = player;\n        let list = this.state.topBarList;\n        if(list.length === this.state.numTeams){\n            list.shift();\n            list.push(player);\n        }\n        else{\n            list.push(player);\n        }\n\n    }\n\n\n    /** This function adds the drafted player to the correct team\n     * @author goethel\n     * \n     * 11/13 - Function Created\n     */\n    addPlayerToTeam() {\n        let team = this.state.curTeam;\n\n        if(team ==1) {\n            this.setState({t1:(this.state.t1.concat(this.state.curPlayerSelected))});\n        }\n        else if(team ==2) {\n            this.setState({t2:(this.state.t2.concat(this.state.curPlayerSelected))});\n        }\n        else if(team ==3) {\n            this.setState({t3:(this.state.t3.concat(this.state.curPlayerSelected))});\n        }\n        else if(team ==4) {\n            this.setState({t4:(this.state.t4.concat(this.state.curPlayerSelected))});\n        }\n        else if(team ==5) {\n            this.setState({t5:(this.state.t5.concat(this.state.curPlayerSelected))});\n        }\n        else if(team ==6) {\n            this.setState({t6:(this.state.t6.concat(this.state.curPlayerSelected))});\n        }\n    }\n    /** This function removes a drafted player from the data grid\n     * \n     */\n    onRemoveSelected() {\n        var res = this.gridApi.updateRowData({ remove: [this.rowNode.data] });\n        console.log(res);\n      }\n    /** This is the function where the switchover code for changing who is drafting should occur\n     * \n     */\n    handleConfirmDraft() {\n        this.setState({DialogState:false,pickNum:(this.state.pickNum+1),draftedPlayer:this.state.curPlayerSelected});\n        this.addPlayerToTeam();\n        debugger;\n        \n        if(this.isDraftDone() == true) {\n            this.DraftFinished();\n        }\n        else {\n            if(this.state.draftType == \"repeating\") {\n                if(this.state.curTeam==this.state.numTeams) {\n                    this.setState({curTeam:1});\n                    this.setState({curTeamName: localStorage.getItem(\"index_team\" + this.state.curTeam)});\n                }\n                else {\n                    this.setState({curTeam:(this.state.curTeam+1)});\n                    this.setState({curTeamName: localStorage.getItem(\"index_team\" + this.state.curTeam)});\n                }\n            }\n            // Code for evaluating next pick in snake draft\n            else if(this.state.draftType == \"snake\") {\n                console.log(this.state.curTeam+\", forward/back:\"+this.state.snakeDraftSide); // debug\n                    if(this.state.snakeDraftSide == 1) {\n                        if(this.state.curTeam == this.state.numTeams) {\n                            this.setState({snakeDraftSide:0})\n                        }\n                        else {\n                        this.setState({curTeam:(this.state.curTeam+1)});\n                        this.setState({curTeamName: localStorage.getItem(\"index_team\" + this.state.curTeam)});\n                        }\n                    }\n                    else {\n                        if(this.state.curTeam == 1) {\n                            this.setState({snakeDraftSide:1})\n                        }\n                        else {\n                        this.setState({curTeam:(this.state.curTeam-1)});\n                        this.setState({curTeamName: localStorage.getItem(\"index_team\" + this.state.curTeam)});\n                        }\n                    }\n                \n            }\n            // Code for switching to next pick\n            \n            }   \n            if(this.state.curPlayerSelected != \"\") {\n                this.onRemoveSelected();\n               }\n            \n    }\n    /** This function will check if Draft is Done or not, treat as js function\n     * \n     */\n    isDraftDone() {\n        if(this.state.pickNum >= this.state.numTeams*this.state.NumPlayersTeam) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    /** This Function handles the eventual switchover to Results Page, and stores the Team data into the local browser storage to be used by the Results Page\n     * \n     */\n    DraftFinished() {\n        // Place finished teams here.\n        localStorage.setItem(\"draft_t1\", JSON.stringify(this.state.t1));\n        localStorage.setItem(\"draft_t2\", JSON.stringify(this.state.t2));\n        localStorage.setItem(\"draft_t3\", JSON.stringify(this.state.t3));\n        localStorage.setItem(\"draft_t4\", JSON.stringify(this.state.t4));\n        localStorage.setItem(\"draft_t5\", JSON.stringify(this.state.t5));\n        localStorage.setItem(\"draft_t6\", JSON.stringify(this.state.t6));\n\n        window.location.href=\"../../tradingpage.html\";\n    }\n    render() {\n        return(\n            <div className=\"App\">\n                <header className=\"App-header\">\n                    <h1>\n                    {this.state.curTeamName} currently drafting\n                    </h1>\n                    <h2>Pick Number {this.state.pickNum}</h2>\n                </header>\n                <div className=\"draft-Body\">\n                \n                    <DialogBox props={{DialogState:this.state.DialogState,handleClose:this.handleClose,handleConfirmDraft:this.handleConfirmDraft,player:this.state.curPlayerSelected}}></DialogBox>\n                    <CurrentDraft playerList={this.state.topBarList}/>\n                    <PlayerDatabase props={{rows:this.state.rows,handleClick:this.handleClick}}></PlayerDatabase>\n                    <div>\n                    <Formation/>\n                    <PlayerTeam curTeam={this.state.curTeam} t1={this.state.t1} t2={this.state.t2} t3={this.state.t3} t4={this.state.t4} t5={this.state.t5} t6={this.state.t6}></PlayerTeam>\n                    </div>\n                    \n                </div>\n                <div>\n                <Button href=\"../../tradingpage.html\" color=\"primary\" variant=\"contained\" className=\"results\">Results Page (TESTING ONLY)</Button>\n                </div>\n                \n                <a\n                    className=\"App-link\"\n                    href=\"https://reactjs.org\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    >\n                    Built with React.js\n                 </a>\n            </div>\n        )\n    }\n    currentDraft(){\n\n    }\n}\n\nexport default DraftPageMaster;"]},"metadata":{},"sourceType":"module"}
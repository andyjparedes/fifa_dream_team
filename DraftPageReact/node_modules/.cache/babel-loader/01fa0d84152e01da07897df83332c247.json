{"ast":null,"code":"import _toConsumableArray from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/toConsumableArray\";import _classCallCheck from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/createClass\";import _possibleConstructorReturn from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/possibleConstructorReturn\";import _getPrototypeOf from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/getPrototypeOf\";import _assertThisInitialized from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/assertThisInitialized\";import _inherits from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/inherits\";import _slicedToArray from\"/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React from'react';import Formation from'./Formation';import CurrentDraft from'./CurrentDraft';import PlayerDatabase from'./Components/Database.jsx';import PlayerTeam from'./Components/PlayerTeam.jsx';import Button from'@material-ui/core/Button';import firebase from'./Firebase/firebase';import Dialog from'@material-ui/core/Dialog';import DialogActions from'@material-ui/core/DialogActions';import DialogContent from'@material-ui/core/DialogContent';import DialogContentText from'@material-ui/core/DialogContentText';import DialogTitle from'@material-ui/core/DialogTitle';/** This is an arrow function to set up the Dialog/Confirmation popup to draft a player they clicked on\n * @author goethel\n * @param {\n * DialogState:boolean\n * handleClose:function (from parent component)\n * } params \n * CHANGES\n * 11/11 - Function Created, Code moved outside of class to avoid Hook errors with react - goethel\n */export var DialogBox=function DialogBox(params){var _React$useState=React.useState(false),_React$useState2=_slicedToArray(_React$useState,2),open=_React$useState2[0],setOpen=_React$useState2[1];if(params.props.DialogState==true&&open==false){setOpen(true);}var handleClose=function handleClose(){setOpen(false);params.props.handleClose();};var handleConfirmed=function handleConfirmed(){setOpen(false);params.props.handleConfirmDraft();};return React.createElement(Dialog,{open:open,onClose:handleClose,\"aria-labelledby\":\"alert-dialog-title\",\"aria-describedby\":\"alert-dialog-description\"},React.createElement(DialogTitle,{id:\"alert-dialog-title\"},\"Draft This Player?\"),React.createElement(DialogContent,null,React.createElement(DialogContentText,{id:\"alert-dialog-description\"},params.props.player.NAME,\"\\n\",params.props.player.RATING)),React.createElement(DialogActions,null,React.createElement(Button,{onClick:handleClose,color:\"primary\"},\"Cancel\"),React.createElement(Button,{onClick:handleConfirmed,color:\"primary\",autoFocus:true},\"Draft\")));};var numPlayers=30;// This is to allow for testing/development, so that we do not run over our server quota by pulling the whole database every time. Will be increased to top 2000 during demos\nvar data=require('./Player.json');/** This is the parent Component of all the components in the Draft Page, so that state can be shared easily\n * \n * @author shivi \n * \n * CHANGELOG\n * 11/01 Updated with documentation and a button linking to results page for testing - goethel\n * 10/30 Component Created - shivi\n */var DraftPageMaster=/*#__PURE__*/function(_React$Component){_inherits(DraftPageMaster,_React$Component);function DraftPageMaster(props){var _this;_classCallCheck(this,DraftPageMaster);// This is where you should grab the settings from index browser storage to use throughout draft\n_this=_possibleConstructorReturn(this,_getPrototypeOf(DraftPageMaster).call(this,props));_this.state={rows:[],t1:[],t2:[],t3:[],t4:[],t5:[],t6:[],NumPlayersTeam:12,// Number of players per team (48 is a bit much!)\nnumTeams:6,// number of teams\nDialogState:false,curPlayerSelected:\"\",// The player that the user double clicked on\ndraftedPlayer:\"\",// This variable will update with the last drafted player\ncurTeam:1,// Allows Players to select which team drafts first\ndraftType:\"normal\",// Snake or Normal\nsnakeDraftSide:1,// Snake going forward round (1234) or backwards round (4321)\npickNum:1,// CUrrent Pick #\ndev:false};// Any function used in callback must be bound here or React will not work with them\n_this.handleClick=_this.handleClick.bind(_assertThisInitialized(_this));_this.handleClose=_this.handleClose.bind(_assertThisInitialized(_this));_this.handleConfirmDraft=_this.handleConfirmDraft.bind(_assertThisInitialized(_this));return _this;}/** This function grabs the X number of players from firebase, and by default sorts by overall or rating\n     * \n     * @author goethel \n     * \n     * CHANGELOG\n     * 11/5 - added option for local DB usage - goethel\n     * 11/2 - file created - goethel\n     */_createClass(DraftPageMaster,[{key:\"componentDidMount\",value:function componentDidMount(){// var myData = Object.keys(data).map(key => {\n//     if(!(data[key].CLUB == \"Icons\")) {\n//         return data[key];\n//     }\n//     else {\n//         delete data[key];\n//     }\n// })\nvar that=this;if(this.state.dev==true){var mostViewedPosts=firebase.database().ref('Players').orderByChild('RATING').limitToLast(numPlayers).once(\"value\").then(function(snapshot){snapshot.forEach(function(childSnapshot){var childData=childSnapshot.val();// This is where checks for Drafted players will occur\nthat.setState({rows:[].concat(_toConsumableArray(that.state.rows),[childData])});});});}if(localStorage.getItem(\"index_numplayers\")!=null){this.setState({rows:data,NumPlayersTeam:localStorage.getItem(\"index_numplayers\"),numTeams:localStorage.getItem(\"index_numteams\")});}else{this.setState({rows:data});}}/** This handles the initial opening of the DialogBox after the user double clicks on a player in the Data Grid\n     * \n     */},{key:\"handleClick\",value:function handleClick(event){this.gridApi=event.api;this.rowNode=event.node;this.setState({DialogState:true,curPlayerSelected:event.data});}/** This function closes the dialog box, if the user clicks cancel\n     * \n     * \n     * 11/11 - Function Created\n     */},{key:\"handleClose\",value:function handleClose(){this.setState({DialogState:false});}/** This function adds the drafted player to the correct team\n     * @author goethel\n     * \n     * 11/13 - Function Created\n     */},{key:\"addPlayerToTeam\",value:function addPlayerToTeam(){var team=this.state.curTeam;if(team==1){this.setState({t1:this.state.t1.concat(this.state.curPlayerSelected)});}else if(team==2){this.setState({t2:this.state.t2.concat(this.state.curPlayerSelected)});}else if(team==3){this.setState({t3:this.state.t3.concat(this.state.curPlayerSelected)});}else if(team==4){this.setState({t4:this.state.t4.concat(this.state.curPlayerSelected)});}else if(team==5){this.setState({t5:this.state.t5.concat(this.state.curPlayerSelected)});}else if(team==6){this.setState({t6:this.state.t6.concat(this.state.curPlayerSelected)});}}/** This function removes a drafted player from the data grid\n     * \n     */},{key:\"onRemoveSelected\",value:function onRemoveSelected(){var res=this.gridApi.updateRowData({remove:[this.rowNode.data]});console.log(res);}/** This is the function where the switchover code for changing who is drafting should occur\n     * \n     */},{key:\"handleConfirmDraft\",value:function handleConfirmDraft(){this.setState({DialogState:false,pickNum:this.state.pickNum+1,draftedPlayer:this.state.curPlayerSelected});this.addPlayerToTeam();if(this.isDraftDone()==true){this.DraftFinished();}else{if(this.state.draftType==\"normal\"){if(this.state.curTeam==this.state.numTeams){this.setState({curTeam:1});}else{this.setState({curTeam:this.state.curTeam+1});}}// Code for evaluating next pick in snake draft\nelse if(this.state.draftType==\"snake\"){console.log(this.state.curTeam+\", forward/back:\"+this.state.snakeDraftSide);// debug\nif(this.state.snakeDraftSide==1){if(this.state.curTeam==this.state.numTeams){this.setState({snakeDraftSide:0});}else{this.setState({curTeam:this.state.curTeam+1});}}else{if(this.state.curTeam==1){this.setState({snakeDraftSide:1});}else{this.setState({curTeam:this.state.curTeam-1});}}}// Code for switching to next pick\n}if(this.state.curPlayerSelected!=\"\"){this.onRemoveSelected();}}/** This function will check if Draft is Done or not, treat as js function\n     * \n     */},{key:\"isDraftDone\",value:function isDraftDone(){if(this.state.pickNum>=this.state.numTeams*this.state.NumPlayersTeam){return true;}else{return false;}}/** This Function handles the eventual switchover to Results Page, and stores the Team data into the local browser storage to be used by the Results Page\n     * \n     */},{key:\"DraftFinished\",value:function DraftFinished(){// Place finished teams here.\nwindow.location.href=\"../../resultpage.html\";}},{key:\"render\",value:function render(){return React.createElement(\"div\",{className:\"App\"},React.createElement(\"header\",{className:\"App-header\"},React.createElement(\"h1\",null,\"Team \",this.state.curTeam,\" currently drafting\"),React.createElement(\"h2\",null,\"Pick Number \",this.state.pickNum)),React.createElement(\"div\",{className:\"draft-Body\"},React.createElement(DialogBox,{props:{DialogState:this.state.DialogState,handleClose:this.handleClose,handleConfirmDraft:this.handleConfirmDraft,player:this.state.curPlayerSelected}}),React.createElement(CurrentDraft,null),React.createElement(PlayerDatabase,{props:{rows:this.state.rows,handleClick:this.handleClick}}),React.createElement(\"div\",null,React.createElement(Formation,null),React.createElement(PlayerTeam,{curTeam:this.state.curTeam,t1:this.state.t1,t2:this.state.t2,t3:this.state.t3,t4:this.state.t4,t5:this.state.t5,t6:this.state.t6}))),React.createElement(\"div\",null,React.createElement(Button,{href:\"../../tradingpage.html\",color:\"primary\",variant:\"contained\",className:\"results\"},\"Results Page (TESTING ONLY)\")),React.createElement(\"a\",{className:\"App-link\",href:\"https://reactjs.org\",target:\"_blank\",rel:\"noopener noreferrer\"},\"Built with React.js\"));}},{key:\"currentDraft\",value:function currentDraft(){}}]);return DraftPageMaster;}(React.Component);export default DraftPageMaster;","map":{"version":3,"sources":["/Users/andrew/Desktop/CS506 Project/fifa_dream_team/DraftPageReact/src/DraftPageMaster.js"],"names":["React","Formation","CurrentDraft","PlayerDatabase","PlayerTeam","Button","firebase","Dialog","DialogActions","DialogContent","DialogContentText","DialogTitle","DialogBox","params","useState","open","setOpen","props","DialogState","handleClose","handleConfirmed","handleConfirmDraft","player","NAME","RATING","numPlayers","data","require","DraftPageMaster","state","rows","t1","t2","t3","t4","t5","t6","NumPlayersTeam","numTeams","curPlayerSelected","draftedPlayer","curTeam","draftType","snakeDraftSide","pickNum","dev","handleClick","bind","that","mostViewedPosts","database","ref","orderByChild","limitToLast","once","then","snapshot","forEach","childSnapshot","childData","val","setState","localStorage","getItem","event","gridApi","api","rowNode","node","team","concat","res","updateRowData","remove","console","log","addPlayerToTeam","isDraftDone","DraftFinished","onRemoveSelected","window","location","href","Component"],"mappings":"8sCAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,MAAOC,CAAAA,SAAP,KAAsB,aAAtB,CACA,MAAOC,CAAAA,YAAP,KAAyB,gBAAzB,CACA,MAAOC,CAAAA,cAAP,KAA2B,2BAA3B,CACA,MAAOC,CAAAA,UAAP,KAAuB,6BAAvB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,QAAP,KAAqB,qBAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,0BAAnB,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,aAAP,KAA0B,iCAA1B,CACA,MAAOC,CAAAA,iBAAP,KAA8B,qCAA9B,CACA,MAAOC,CAAAA,WAAP,KAAwB,+BAAxB,CAEA;;;;;;;;GASA,MAAO,IAAMC,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,CAACC,MAAD,CAAY,qBACTb,KAAK,CAACc,QAAN,CAAe,KAAf,CADS,oDAC1BC,IAD0B,qBACpBC,OADoB,qBAGrC,GAAGH,MAAM,CAACI,KAAP,CAAaC,WAAb,EAA4B,IAA5B,EAAoCH,IAAI,EAAI,KAA/C,CAAsD,CAClDC,OAAO,CAAC,IAAD,CAAP,CACH,CACD,GAAOG,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,EAAM,CACvBH,OAAO,CAAC,KAAD,CAAP,CACAH,MAAM,CAACI,KAAP,CAAaE,WAAb,GACH,CAHD,CAIA,GAAOC,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,EAAM,CAC3BJ,OAAO,CAAC,KAAD,CAAP,CACAH,MAAM,CAACI,KAAP,CAAaI,kBAAb,GACH,CAHD,CAII,MAAO,qBAAC,MAAD,EACP,IAAI,CAAEN,IADC,CAEP,OAAO,CAAEI,WAFF,CAGP,kBAAgB,oBAHT,CAIP,mBAAiB,0BAJV,EAMP,oBAAC,WAAD,EAAa,EAAE,CAAC,oBAAhB,EAAsC,oBAAtC,CANO,CAOP,oBAAC,aAAD,MACE,oBAAC,iBAAD,EAAmB,EAAE,CAAC,0BAAtB,EACGN,MAAM,CAACI,KAAP,CAAaK,MAAb,CAAoBC,IADvB,CAC6B,IAD7B,CAEGV,MAAM,CAACI,KAAP,CAAaK,MAAb,CAAoBE,MAFvB,CADF,CAPO,CAaP,oBAAC,aAAD,MACE,oBAAC,MAAD,EAAQ,OAAO,CAAEL,WAAjB,CAA8B,KAAK,CAAC,SAApC,WADF,CAIE,oBAAC,MAAD,EAAQ,OAAO,CAAEC,eAAjB,CAAkC,KAAK,CAAC,SAAxC,CAAkD,SAAS,KAA3D,UAJF,CAbO,CAAP,CAsBH,CApCM,CAsCP,GAAMK,CAAAA,UAAU,CAAG,EAAnB,CAAuB;AACvB,GAAMC,CAAAA,IAAI,CAACC,OAAO,CAAC,eAAD,CAAlB,CACA;;;;;;;MAQMC,CAAAA,e,qFAEF,yBAAYX,KAAZ,CAAmB,iDACf;AACA,iFAAMA,KAAN,GACA,MAAKY,KAAL,CAAa,CACnBC,IAAI,CAAC,EADc,CAELC,EAAE,CAAC,EAFE,CAGLC,EAAE,CAAC,EAHE,CAILC,EAAE,CAAC,EAJE,CAKLC,EAAE,CAAC,EALE,CAMLC,EAAE,CAAC,EANE,CAOLC,EAAE,CAAC,EAPE,CASbC,cAAc,CAAC,EATF,CASM;AACnBC,QAAQ,CAAC,CAVI,CAUD;AACZpB,WAAW,CAAC,KAXC,CAYbqB,iBAAiB,CAAC,EAZL,CAYS;AACtBC,aAAa,CAAC,EAbD,CAaK;AAClBC,OAAO,CAAC,CAdK,CAcF;AACXC,SAAS,CAAC,QAfG,CAeO;AACpBC,cAAc,CAAC,CAhBF,CAgBK;AAClBC,OAAO,CAAC,CAjBK,CAiBF;AACXC,GAAG,CAAC,KAlBS,CAAb,CAqBJ;AACA,MAAKC,WAAL,CAAmB,MAAKA,WAAL,CAAiBC,IAAjB,+BAAnB,CACA,MAAK5B,WAAL,CAAmB,MAAKA,WAAL,CAAiB4B,IAAjB,+BAAnB,CACA,MAAK1B,kBAAL,CAA0B,MAAKA,kBAAL,CAAwB0B,IAAxB,+BAA1B,CA3BmB,aA4BlB,CACD;;;;;;;gGAQoB,CAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAIC,CAAAA,IAAI,CAAG,IAAX,CACA,GAAG,KAAKnB,KAAL,CAAWgB,GAAX,EAAkB,IAArB,CAA2B,CAC3B,GAAII,CAAAA,eAAe,CAAG3C,QAAQ,CAAC4C,QAAT,GAAoBC,GAApB,CAAwB,SAAxB,EAAmCC,YAAnC,CAAgD,QAAhD,EAA0DC,WAA1D,CAAsE5B,UAAtE,EAAkF6B,IAAlF,CAAuF,OAAvF,EAAgGC,IAAhG,CAAqG,SAASC,QAAT,CAAkB,CACzIA,QAAQ,CAACC,OAAT,CAAiB,SAAUC,aAAV,CAAyB,CACtC,GAAIC,CAAAA,SAAS,CAAGD,aAAa,CAACE,GAAd,EAAhB,CACA;AACAZ,IAAI,CAACa,QAAL,CAAc,CAAC/B,IAAI,8BAAKkB,IAAI,CAACnB,KAAL,CAAWC,IAAhB,GAAqB6B,SAArB,EAAL,CAAd,EACH,CAJD,EAKH,CANqB,CAAtB,CAOC,CACD,GAAGG,YAAY,CAACC,OAAb,CAAqB,kBAArB,GAA4C,IAA/C,CAAqD,CACjD,KAAKF,QAAL,CAAc,CAAC/B,IAAI,CAACJ,IAAN,CAAWW,cAAc,CAACyB,YAAY,CAACC,OAAb,CAAqB,kBAArB,CAA1B,CAAmEzB,QAAQ,CAACwB,YAAY,CAACC,OAAb,CAAqB,gBAArB,CAA5E,CAAd,EACH,CAFD,IAGI,CACD,KAAKF,QAAL,CAAc,CAAC/B,IAAI,CAACJ,IAAN,CAAd,EACH,CAEH,CACD;;uDAGYsC,K,CAAO,CAEhB,KAAKC,OAAL,CAAeD,KAAK,CAACE,GAArB,CACC,KAAKC,OAAL,CAAeH,KAAK,CAACI,IAArB,CACA,KAAKP,QAAL,CAAc,CAAC3C,WAAW,CAAC,IAAb,CAAkBqB,iBAAiB,CAACyB,KAAK,CAACtC,IAA1C,CAAd,EACH,CACD;;;;wDAKc,CACV,KAAKmC,QAAL,CAAc,CAAC3C,WAAW,CAAC,KAAb,CAAd,EACH,CACD;;;;gEAKkB,CACd,GAAImD,CAAAA,IAAI,CAAG,KAAKxC,KAAL,CAAWY,OAAtB,CAEA,GAAG4B,IAAI,EAAG,CAAV,CAAa,CACT,KAAKR,QAAL,CAAc,CAAC9B,EAAE,CAAE,KAAKF,KAAL,CAAWE,EAAX,CAAcuC,MAAd,CAAqB,KAAKzC,KAAL,CAAWU,iBAAhC,CAAL,CAAd,EACH,CAFD,IAGK,IAAG8B,IAAI,EAAG,CAAV,CAAa,CACd,KAAKR,QAAL,CAAc,CAAC7B,EAAE,CAAE,KAAKH,KAAL,CAAWG,EAAX,CAAcsC,MAAd,CAAqB,KAAKzC,KAAL,CAAWU,iBAAhC,CAAL,CAAd,EACH,CAFI,IAGA,IAAG8B,IAAI,EAAG,CAAV,CAAa,CACd,KAAKR,QAAL,CAAc,CAAC5B,EAAE,CAAE,KAAKJ,KAAL,CAAWI,EAAX,CAAcqC,MAAd,CAAqB,KAAKzC,KAAL,CAAWU,iBAAhC,CAAL,CAAd,EACH,CAFI,IAGA,IAAG8B,IAAI,EAAG,CAAV,CAAa,CACd,KAAKR,QAAL,CAAc,CAAC3B,EAAE,CAAE,KAAKL,KAAL,CAAWK,EAAX,CAAcoC,MAAd,CAAqB,KAAKzC,KAAL,CAAWU,iBAAhC,CAAL,CAAd,EACH,CAFI,IAGA,IAAG8B,IAAI,EAAG,CAAV,CAAa,CACd,KAAKR,QAAL,CAAc,CAAC1B,EAAE,CAAE,KAAKN,KAAL,CAAWM,EAAX,CAAcmC,MAAd,CAAqB,KAAKzC,KAAL,CAAWU,iBAAhC,CAAL,CAAd,EACH,CAFI,IAGA,IAAG8B,IAAI,EAAG,CAAV,CAAa,CACd,KAAKR,QAAL,CAAc,CAACzB,EAAE,CAAE,KAAKP,KAAL,CAAWO,EAAX,CAAckC,MAAd,CAAqB,KAAKzC,KAAL,CAAWU,iBAAhC,CAAL,CAAd,EACH,CACJ,CACD;;kEAGmB,CACf,GAAIgC,CAAAA,GAAG,CAAG,KAAKN,OAAL,CAAaO,aAAb,CAA2B,CAAEC,MAAM,CAAE,CAAC,KAAKN,OAAL,CAAazC,IAAd,CAAV,CAA3B,CAAV,CACAgD,OAAO,CAACC,GAAR,CAAYJ,GAAZ,EACD,CACH;;sEAGqB,CACjB,KAAKV,QAAL,CAAc,CAAC3C,WAAW,CAAC,KAAb,CAAmB0B,OAAO,CAAE,KAAKf,KAAL,CAAWe,OAAX,CAAmB,CAA/C,CAAkDJ,aAAa,CAAC,KAAKX,KAAL,CAAWU,iBAA3E,CAAd,EACA,KAAKqC,eAAL,GAGA,GAAG,KAAKC,WAAL,IAAsB,IAAzB,CAA+B,CAC3B,KAAKC,aAAL,GACH,CAFD,IAGK,CACD,GAAG,KAAKjD,KAAL,CAAWa,SAAX,EAAwB,QAA3B,CAAqC,CACjC,GAAG,KAAKb,KAAL,CAAWY,OAAX,EAAoB,KAAKZ,KAAL,CAAWS,QAAlC,CAA4C,CACxC,KAAKuB,QAAL,CAAc,CAACpB,OAAO,CAAC,CAAT,CAAd,EACH,CAFD,IAGK,CACD,KAAKoB,QAAL,CAAc,CAACpB,OAAO,CAAE,KAAKZ,KAAL,CAAWY,OAAX,CAAmB,CAA7B,CAAd,EACH,CACJ,CACD;AARA,IASK,IAAG,KAAKZ,KAAL,CAAWa,SAAX,EAAwB,OAA3B,CAAoC,CACrCgC,OAAO,CAACC,GAAR,CAAY,KAAK9C,KAAL,CAAWY,OAAX,CAAmB,iBAAnB,CAAqC,KAAKZ,KAAL,CAAWc,cAA5D,EAA6E;AACzE,GAAG,KAAKd,KAAL,CAAWc,cAAX,EAA6B,CAAhC,CAAmC,CAC/B,GAAG,KAAKd,KAAL,CAAWY,OAAX,EAAsB,KAAKZ,KAAL,CAAWS,QAApC,CAA8C,CAC1C,KAAKuB,QAAL,CAAc,CAAClB,cAAc,CAAC,CAAhB,CAAd,EACH,CAFD,IAGK,CACL,KAAKkB,QAAL,CAAc,CAACpB,OAAO,CAAE,KAAKZ,KAAL,CAAWY,OAAX,CAAmB,CAA7B,CAAd,EACC,CACJ,CAPD,IAQK,CACD,GAAG,KAAKZ,KAAL,CAAWY,OAAX,EAAsB,CAAzB,CAA4B,CACxB,KAAKoB,QAAL,CAAc,CAAClB,cAAc,CAAC,CAAhB,CAAd,EACH,CAFD,IAGK,CACL,KAAKkB,QAAL,CAAc,CAACpB,OAAO,CAAE,KAAKZ,KAAL,CAAWY,OAAX,CAAmB,CAA7B,CAAd,EACC,CACJ,CAER,CACD;AAEC,CACD,GAAG,KAAKZ,KAAL,CAAWU,iBAAX,EAAgC,EAAnC,CAAuC,CACnC,KAAKwC,gBAAL,GACA,CAEX,CACD;;wDAGc,CACV,GAAG,KAAKlD,KAAL,CAAWe,OAAX,EAAsB,KAAKf,KAAL,CAAWS,QAAX,CAAoB,KAAKT,KAAL,CAAWQ,cAAxD,CAAwE,CACpE,MAAO,KAAP,CACH,CAFD,IAGK,CACD,MAAO,MAAP,CACH,CACJ,CACD;;4DAGgB,CACZ;AACA2C,MAAM,CAACC,QAAP,CAAgBC,IAAhB,CAAqB,uBAArB,CACH,C,uCACQ,CACL,MACI,4BAAK,SAAS,CAAC,KAAf,EACI,8BAAQ,SAAS,CAAC,YAAlB,EACI,sCACM,KAAKrD,KAAL,CAAWY,OADjB,uBADJ,CAII,6CAAiB,KAAKZ,KAAL,CAAWe,OAA5B,CAJJ,CADJ,CAOI,2BAAK,SAAS,CAAC,YAAf,EAEI,oBAAC,SAAD,EAAW,KAAK,CAAE,CAAC1B,WAAW,CAAC,KAAKW,KAAL,CAAWX,WAAxB,CAAoCC,WAAW,CAAC,KAAKA,WAArD,CAAiEE,kBAAkB,CAAC,KAAKA,kBAAzF,CAA4GC,MAAM,CAAC,KAAKO,KAAL,CAAWU,iBAA9H,CAAlB,EAFJ,CAGI,oBAAC,YAAD,MAHJ,CAII,oBAAC,cAAD,EAAgB,KAAK,CAAE,CAACT,IAAI,CAAC,KAAKD,KAAL,CAAWC,IAAjB,CAAsBgB,WAAW,CAAC,KAAKA,WAAvC,CAAvB,EAJJ,CAKI,+BACA,oBAAC,SAAD,MADA,CAEA,oBAAC,UAAD,EAAY,OAAO,CAAE,KAAKjB,KAAL,CAAWY,OAAhC,CAAyC,EAAE,CAAE,KAAKZ,KAAL,CAAWE,EAAxD,CAA4D,EAAE,CAAE,KAAKF,KAAL,CAAWG,EAA3E,CAA+E,EAAE,CAAE,KAAKH,KAAL,CAAWI,EAA9F,CAAkG,EAAE,CAAE,KAAKJ,KAAL,CAAWK,EAAjH,CAAqH,EAAE,CAAE,KAAKL,KAAL,CAAWM,EAApI,CAAwI,EAAE,CAAE,KAAKN,KAAL,CAAWO,EAAvJ,EAFA,CALJ,CAPJ,CAkBI,+BACA,oBAAC,MAAD,EAAQ,IAAI,CAAC,wBAAb,CAAsC,KAAK,CAAC,SAA5C,CAAsD,OAAO,CAAC,WAA9D,CAA0E,SAAS,CAAC,SAApF,gCADA,CAlBJ,CAsBI,yBACI,SAAS,CAAC,UADd,CAEI,IAAI,CAAC,qBAFT,CAGI,MAAM,CAAC,QAHX,CAII,GAAG,CAAC,qBAJR,wBAtBJ,CADJ,CAiCH,C,mDACa,CAEb,C,6BA9NyBpC,KAAK,CAACmF,S,EAiOpC,cAAevD,CAAAA,eAAf","sourcesContent":["import React from 'react';\nimport Formation from './Formation';\nimport CurrentDraft from './CurrentDraft';\nimport PlayerDatabase from './Components/Database.jsx';\nimport PlayerTeam from './Components/PlayerTeam.jsx';\nimport Button from '@material-ui/core/Button';\nimport firebase from './Firebase/firebase'\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogContentText from '@material-ui/core/DialogContentText';\nimport DialogTitle from '@material-ui/core/DialogTitle';\n\n/** This is an arrow function to set up the Dialog/Confirmation popup to draft a player they clicked on\n * @author goethel\n * @param {\n * DialogState:boolean\n * handleClose:function (from parent component)\n * } params \n * CHANGES\n * 11/11 - Function Created, Code moved outside of class to avoid Hook errors with react - goethel\n */\nexport const DialogBox = (params) => {\n    const [open, setOpen] = React.useState(false);\n    \nif(params.props.DialogState == true && open == false) {\n    setOpen(true);\n}\nconst  handleClose = () => {\n    setOpen(false);\n    params.props.handleClose();\n}\nconst  handleConfirmed = () => {\n    setOpen(false);\n    params.props.handleConfirmDraft();\n}\n    return(<Dialog\n    open={open}\n    onClose={handleClose}\n    aria-labelledby=\"alert-dialog-title\"\n    aria-describedby=\"alert-dialog-description\"\n    >\n    <DialogTitle id=\"alert-dialog-title\">{\"Draft This Player?\"}</DialogTitle>\n    <DialogContent>\n      <DialogContentText id=\"alert-dialog-description\">\n        {params.props.player.NAME}{\"\\n\"}\n        {params.props.player.RATING}\n      </DialogContentText>\n    </DialogContent>\n    <DialogActions>\n      <Button onClick={handleClose} color=\"primary\">\n        Cancel\n      </Button>\n      <Button onClick={handleConfirmed} color=\"primary\" autoFocus>\n        Draft\n      </Button>\n    </DialogActions>\n    </Dialog>);\n}\n\nconst numPlayers = 30; // This is to allow for testing/development, so that we do not run over our server quota by pulling the whole database every time. Will be increased to top 2000 during demos\nconst data=require('./Player.json');\n/** This is the parent Component of all the components in the Draft Page, so that state can be shared easily\n * \n * @author shivi \n * \n * CHANGELOG\n * 11/01 Updated with documentation and a button linking to results page for testing - goethel\n * 10/30 Component Created - shivi\n */\nclass DraftPageMaster extends React.Component {\n    \n    constructor(props) {\n        // This is where you should grab the settings from index browser storage to use throughout draft\n        super(props);\n        this.state = {\n\t\trows:[],\n                t1:[],\n                t2:[],\n                t3:[],\n                t4:[],\n                t5:[],\n                t6:[],\n                \n        NumPlayersTeam:12, // Number of players per team (48 is a bit much!)\n        numTeams:6, // number of teams\n        DialogState:false,\n        curPlayerSelected:\"\", // The player that the user double clicked on\n        draftedPlayer:\"\", // This variable will update with the last drafted player\n        curTeam:1, // Allows Players to select which team drafts first\n        draftType:\"normal\", // Snake or Normal\n        snakeDraftSide:1, // Snake going forward round (1234) or backwards round (4321)\n        pickNum:1, // CUrrent Pick #\n        dev:false\n        }\n    \n    // Any function used in callback must be bound here or React will not work with them\n    this.handleClick = this.handleClick.bind(this);\n    this.handleClose = this.handleClose.bind(this);\n    this.handleConfirmDraft = this.handleConfirmDraft.bind(this);\n    }\n    /** This function grabs the X number of players from firebase, and by default sorts by overall or rating\n     * \n     * @author goethel \n     * \n     * CHANGELOG\n     * 11/5 - added option for local DB usage - goethel\n     * 11/2 - file created - goethel\n     */\n    componentDidMount() {\n\n        // var myData = Object.keys(data).map(key => {\n        //     if(!(data[key].CLUB == \"Icons\")) {\n        //         return data[key];\n        //     }\n        //     else {\n        //         delete data[key];\n        //     }\n        // })\n        var that = this;\n        if(this.state.dev == true) {\n        var mostViewedPosts = firebase.database().ref('Players').orderByChild('RATING').limitToLast(numPlayers).once(\"value\").then(function(snapshot){\n            snapshot.forEach(function (childSnapshot) {\n                var childData = childSnapshot.val();\n                // This is where checks for Drafted players will occur\n                that.setState({rows:[...that.state.rows,childData]});\n            });\n        });   \n        } \n        if(localStorage.getItem(\"index_numplayers\") != null) {\n            this.setState({rows:data,NumPlayersTeam:localStorage.getItem(\"index_numplayers\"),numTeams:localStorage.getItem(\"index_numteams\")});\n        }\n       else {\n           this.setState({rows:data});\n       }\n     \n    }\n    /** This handles the initial opening of the DialogBox after the user double clicks on a player in the Data Grid\n     * \n     */\n    handleClick(event) {\n\n       this.gridApi = event.api;\n        this.rowNode = event.node;\n        this.setState({DialogState:true,curPlayerSelected:event.data})\n    }\n    /** This function closes the dialog box, if the user clicks cancel\n     * \n     * \n     * 11/11 - Function Created\n     */\n    handleClose() {\n        this.setState({DialogState:false})\n    }\n    /** This function adds the drafted player to the correct team\n     * @author goethel\n     * \n     * 11/13 - Function Created\n     */\n    addPlayerToTeam() {\n        let team = this.state.curTeam;\n\n        if(team ==1) {\n            this.setState({t1:(this.state.t1.concat(this.state.curPlayerSelected))});\n        }\n        else if(team ==2) {\n            this.setState({t2:(this.state.t2.concat(this.state.curPlayerSelected))});\n        }\n        else if(team ==3) {\n            this.setState({t3:(this.state.t3.concat(this.state.curPlayerSelected))});\n        }\n        else if(team ==4) {\n            this.setState({t4:(this.state.t4.concat(this.state.curPlayerSelected))});\n        }\n        else if(team ==5) {\n            this.setState({t5:(this.state.t5.concat(this.state.curPlayerSelected))});\n        }\n        else if(team ==6) {\n            this.setState({t6:(this.state.t6.concat(this.state.curPlayerSelected))});\n        }\n    }\n    /** This function removes a drafted player from the data grid\n     * \n     */\n    onRemoveSelected() {\n        var res = this.gridApi.updateRowData({ remove: [this.rowNode.data] });\n        console.log(res);\n      }\n    /** This is the function where the switchover code for changing who is drafting should occur\n     * \n     */\n    handleConfirmDraft() {\n        this.setState({DialogState:false,pickNum:(this.state.pickNum+1),draftedPlayer:this.state.curPlayerSelected});\n        this.addPlayerToTeam();\n        \n        \n        if(this.isDraftDone() == true) {\n            this.DraftFinished();\n        }\n        else {\n            if(this.state.draftType == \"normal\") {\n                if(this.state.curTeam==this.state.numTeams) {\n                    this.setState({curTeam:1});\n                }\n                else {\n                    this.setState({curTeam:(this.state.curTeam+1)})\n                }\n            }\n            // Code for evaluating next pick in snake draft\n            else if(this.state.draftType == \"snake\") {\n                console.log(this.state.curTeam+\", forward/back:\"+this.state.snakeDraftSide); // debug\n                    if(this.state.snakeDraftSide == 1) {\n                        if(this.state.curTeam == this.state.numTeams) {\n                            this.setState({snakeDraftSide:0})\n                        }\n                        else {\n                        this.setState({curTeam:(this.state.curTeam+1)})\n                        }\n                    }\n                    else {\n                        if(this.state.curTeam == 1) {\n                            this.setState({snakeDraftSide:1})\n                        }\n                        else {\n                        this.setState({curTeam:(this.state.curTeam-1)})\n                        }\n                    }\n                \n            }\n            // Code for switching to next pick\n            \n            }   \n            if(this.state.curPlayerSelected != \"\") {\n                this.onRemoveSelected();\n               }\n            \n    }\n    /** This function will check if Draft is Done or not, treat as js function\n     * \n     */\n    isDraftDone() {\n        if(this.state.pickNum >= this.state.numTeams*this.state.NumPlayersTeam) {\n            return true;\n        }\n        else {\n            return false;\n        }\n    }\n    /** This Function handles the eventual switchover to Results Page, and stores the Team data into the local browser storage to be used by the Results Page\n     * \n     */\n    DraftFinished() {\n        // Place finished teams here.\n        window.location.href=\"../../resultpage.html\";\n    }\n    render() {\n        return(\n            <div className=\"App\">\n                <header className=\"App-header\">\n                    <h1>\n                    Team {this.state.curTeam} currently drafting\n                    </h1>\n                    <h2>Pick Number {this.state.pickNum}</h2>\n                </header>\n                <div className=\"draft-Body\">\n                \n                    <DialogBox props={{DialogState:this.state.DialogState,handleClose:this.handleClose,handleConfirmDraft:this.handleConfirmDraft,player:this.state.curPlayerSelected}}></DialogBox>\n                    <CurrentDraft/>\n                    <PlayerDatabase props={{rows:this.state.rows,handleClick:this.handleClick}}></PlayerDatabase>\n                    <div>\n                    <Formation/>\n                    <PlayerTeam curTeam={this.state.curTeam} t1={this.state.t1} t2={this.state.t2} t3={this.state.t3} t4={this.state.t4} t5={this.state.t5} t6={this.state.t6}></PlayerTeam>\n                    </div>\n                    \n                </div>\n                <div>\n                <Button href=\"../../tradingpage.html\" color=\"primary\" variant=\"contained\" className=\"results\">Results Page (TESTING ONLY)</Button>\n                </div>\n                \n                <a\n                    className=\"App-link\"\n                    href=\"https://reactjs.org\"\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    >\n                    Built with React.js\n                 </a>\n            </div>\n        )\n    }\n    currentDraft(){\n\n    }\n}\n\nexport default DraftPageMaster;"]},"metadata":{},"sourceType":"module"}